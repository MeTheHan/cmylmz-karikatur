<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cem YÄ±lmaz KarikatÃ¼rler - Basit GÃ¶rÃ¼ntÃ¼leyici</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Arial, sans-serif;
            background: #f0f0f0;
            min-height: 100vh;
        }
        
        #header {
            background: #333;
            color: white;
            padding: 20px;
            text-align: center;
            font-size: 24px;
        }
        
        #controls {
            background: #444;
            padding: 15px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            align-items: center;
        }
        
        button {
            padding: 10px 20px;
            background: #555;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        
        button:hover {
            background: #666;
        }
        
        .page-input {
            width: 70px;
            padding: 10px;
            text-align: center;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 16px;
        }
        
        #viewer {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            padding: 20px;
            min-height: 80vh;
        }
        
        #pdf-viewer {
            width: 100%;
            max-width: 1200px;
            height: 80vh;
            border: 2px solid #333;
            border-radius: 5px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }
        
        #error-message {
            background: #ffcccc;
            color: #cc0000;
            padding: 20px;
            margin: 20px;
            border-radius: 5px;
            border: 1px solid #cc0000;
            display: none;
        }
        
        #loading {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 30px 50px;
            border-radius: 10px;
            display: none;
            z-index: 1000;
        }
        
        footer {
            background: #333;
            color: white;
            padding: 15px;
            text-align: center;
            margin-top: 20px;
        }
        
        @media (max-width: 768px) {
            #controls {
                flex-direction: column;
            }
            
            button {
                width: 90%;
            }
        }
    </style>
</head>
<body>
    <div id="header">
        Cem YÄ±lmaz KarikatÃ¼rler - PDF GÃ¶rÃ¼ntÃ¼leyici
    </div>
    
    <div id="controls">
        <button onclick="prevPage()">â—€ Ã–nceki</button>
        <input type="number" class="page-input" id="page-input" value="1" min="1">
        <span>/ <span id="total-pages">?</span></span>
        <button onclick="goToPage()">Git</button>
        <button onclick="nextPage()">Sonraki â–¶</button>
        <button onclick="zoomIn()">â•</button>
        <button onclick="zoomOut()">â–</button>
        <button onclick="fitWidth()">ğŸ“</button>
    </div>
    
    <div id="loading">
        <h3>PDF YÃ¼kleniyor...</h3>
        <p>EÄŸer bu ekranda takÄ±lÄ± kalÄ±rsanÄ±z:</p>
        <ol>
            <li>PDF dosyasÄ±nÄ±n aynÄ± klasÃ¶rde olduÄŸundan emin olun</li>
            <li>Yerel sunucu kullanÄ±n: terminalde `python -m http.server 8000` yazÄ±n</li>
            <li>TarayÄ±cÄ±dan `http://localhost:8000` adresine gidin</li>
        </ol>
    </div>
    
    <div id="error-message">
        <h3>PDF YÃ¼klenemedi!</h3>
        <p>OlasÄ± nedenler:</p>
        <ul>
            <li>PDF dosyasÄ± bulunamadÄ±</li>
            <li>CORS hatasÄ± (yerel sunucu kullanmanÄ±z gerekiyor)</li>
            <li>PDF dosyasÄ± bozuk</li>
        </ul>
        <p><strong>Ã‡Ã¶zÃ¼m:</strong> Terminal/CMD'yi aÃ§Ä±n ve ÅŸu komutu yazÄ±n:</p>
        <code>python -m http.server 8000</code>
        <p>Sonra tarayÄ±cÄ±dan <a href="http://localhost:8000" target="_blank">http://localhost:8000</a> adresine gidin.</p>
    </div>
    
    <div id="viewer">
        <iframe id="pdf-viewer" src=""></iframe>
    </div>
    
    <footer>
        YouTube: @MTechnoW | Kaynak: kursadozmen.wordpress.com
    </footer>
    
    <script>
        // PDF.js worker'Ä±nÄ± yÃ¼kle
        const pdfjsLib = window['pdfjs-dist/build/pdf'];
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://mozilla.github.io/pdf.js/build/pdf.worker.js';
        
        let pdfDoc = null;
        let currentPage = 1;
        let scale = 1.0;
        let totalPages = 1;
        
        const viewer = document.getElementById('pdf-viewer');
        const pageInput = document.getElementById('page-input');
        const totalPagesSpan = document.getElementById('total-pages');
        const loading = document.getElementById('loading');
        const errorMessage = document.getElementById('error-message');
        
        // PDF yÃ¼kle
        function loadPDF() {
            loading.style.display = 'block';
            errorMessage.style.display = 'none';
            
            // Ã–nce iframe ile dene (daha basit)
            tryIframeMethod();
        }
        
        // 1. YÃ¶ntem: Basit iframe ile
        function tryIframeMethod() {
            const pdfUrl = 'cem-yilmaz-karikaturler.pdf';
            
            // Fetch ile kontrol et
            fetch(pdfUrl)
                .then(response => {
                    if (response.ok) {
                        // PDF mevcut, iframe ile gÃ¶ster
                        viewer.src = pdfUrl + '#page=1&zoom=100';
                        loading.style.display = 'none';
                        showNotification('PDF baÅŸarÄ±yla yÃ¼klendi!');
                        
                        // Sayfa sayÄ±sÄ±nÄ± tahmin et (129 sayfa)
                        totalPages = 129;
                        totalPagesSpan.textContent = totalPages;
                    } else {
                        throw new Error('PDF bulunamadÄ±');
                    }
                })
                .catch(error => {
                    console.error('Iframe yÃ¶ntemi baÅŸarÄ±sÄ±z:', error);
                    // 2. yÃ¶ntemi dene
                    tryPDFjsMethod();
                });
        }
        
        // 2. YÃ¶ntem: PDF.js ile
        function tryPDFjsMethod() {
            const pdfUrl = 'cem-yilmaz-karikaturler.pdf';
            
            pdfjsLib.getDocument(pdfUrl).promise
                .then(pdf => {
                    pdfDoc = pdf;
                    totalPages = pdf.numPages;
                    totalPagesSpan.textContent = totalPages;
                    loading.style.display = 'none';
                    renderPage(1);
                    showNotification('PDF.js ile yÃ¼klendi!');
                })
                .catch(error => {
                    console.error('PDF.js yÃ¶ntemi baÅŸarÄ±sÄ±z:', error);
                    loading.style.display = 'none';
                    errorMessage.style.display = 'block';
                });
        }
        
        // PDF.js ile sayfa render et
        function renderPage(pageNum) {
            if (!pdfDoc) return;
            
            pdfDoc.getPage(pageNum).then(page => {
                const viewport = page.getViewport({ scale: scale });
                const canvas = document.createElement('canvas');
                const context = canvas.getContext('2d');
                
                canvas.height = viewport.height;
                canvas.width = viewport.width;
                
                // Canvas'Ä± temizle
                const viewer = document.getElementById('viewer');
                viewer.innerHTML = '';
                viewer.appendChild(canvas);
                
                // Render
                const renderContext = {
                    canvasContext: context,
                    viewport: viewport
                };
                
                page.render(renderContext);
                
                // GÃ¼ncelle
                currentPage = pageNum;
                pageInput.value = pageNum;
            });
        }
        
        // Ã–nceki sayfa
        function prevPage() {
            if (currentPage > 1) {
                currentPage--;
                updateViewer();
            }
        }
        
        // Sonraki sayfa
        function nextPage() {
            if (currentPage < totalPages) {
                currentPage++;
                updateViewer();
            }
        }
        
        // Belirli sayfaya git
        function goToPage() {
            const page = parseInt(pageInput.value);
            if (page >= 1 && page <= totalPages) {
                currentPage = page;
                updateViewer();
            }
        }
        
        // GÃ¶rÃ¼ntÃ¼leyiciyi gÃ¼ncelle
        function updateViewer() {
            if (pdfDoc) {
                // PDF.js kullanÄ±lÄ±yorsa
                renderPage(currentPage);
            } else {
                // Iframe kullanÄ±lÄ±yorsa
                viewer.src = `cem-yilmaz-karikaturler.pdf#page=${currentPage}&zoom=${Math.round(scale * 100)}`;
            }
        }
        
        // YakÄ±nlaÅŸtÄ±r
        function zoomIn() {
            scale += 0.1;
            updateViewer();
        }
        
        // UzaklaÅŸtÄ±r
        function zoomOut() {
            if (scale > 0.2) {
                scale -= 0.1;
                updateViewer();
            }
        }
        
        // GeniÅŸliÄŸe sÄ±ÄŸdÄ±r
        function fitWidth() {
            scale = 1.0;
            updateViewer();
        }
        
        // Bildirim gÃ¶ster
        function showNotification(message) {
            // Basit bir bildirim
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #4CAF50;
                color: white;
                padding: 15px;
                border-radius: 5px;
                z-index: 1000;
                box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }
        
        // Klavye kÄ±sayollarÄ±
        document.addEventListener('keydown', (e) => {
            switch(e.key) {
                case 'ArrowLeft':
                    prevPage();
                    break;
                case 'ArrowRight':
                    nextPage();
                    break;
                case '+':
                    if (e.ctrlKey) {
                        e.preventDefault();
                        zoomIn();
                    }
                    break;
                case '-':
                    if (e.ctrlKey) {
                        e.preventDefault();
                        zoomOut();
                    }
                    break;
            }
        });
        
        // Sayfa yÃ¼klendiÄŸinde PDF'yi yÃ¼kle
        window.addEventListener('load', () => {
            // 2 saniye bekleyip yÃ¼kle
            setTimeout(loadPDF, 100);
        });
        
        // PDF dosyasÄ± yoksa demo gÃ¶ster
        setTimeout(() => {
            if (!pdfDoc && viewer.src === '') {
                errorMessage.style.display = 'block';
                loading.style.display = 'none';
                
                // Demo PDF linki gÃ¶ster
                errorMessage.innerHTML += `
                    <hr>
                    <p><strong>Demo iÃ§in:</strong> AÅŸaÄŸÄ±daki butona tÄ±klayÄ±n (internet gerektirir):</p>
                    <button onclick="loadDemoPDF()" style="padding:10px; background:#4CAF50; color:white; border:none; border-radius:5px;">
                        Demo PDF YÃ¼kle
                    </button>
                `;
            }
        }, 5000);
        
        // Demo PDF yÃ¼kle
        function loadDemoPDF() {
            viewer.src = 'https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf#page=1';
            loading.style.display = 'none';
            errorMessage.style.display = 'none';
            totalPages = 5;
            totalPagesSpan.textContent = totalPages;
            showNotification('Demo PDF yÃ¼klendi! Kendi PDF\'nizi koyduÄŸunuzda Ã§alÄ±ÅŸacaktÄ±r.');
        }
    </script>
</body>
</html>
